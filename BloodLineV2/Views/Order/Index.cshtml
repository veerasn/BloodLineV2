@model IEnumerable<BloodLineV2.Models.Cart>

@{
    ViewBag.Title = "Request List";
    Layout = "~/Views/Shared/_Layout_Patient.cshtml";
}

<h2>Blood requests </h2>

<table class="table table-striped table-sm">
    <thead>
        <tr>
            <th>
                Creation Date
            </th>
            <th>
                Status
            </th>
            <th>
                Location
            </th>
            <th>
                Sample ID
            </th>
            <th>
                Patient ID
            </th>
            <th>
                Patient Name
            </th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            switch (item.Urgency)
            {
                    case 1:
                    @:<tr class='table-danger'>
                        break;

                    case 2:
                        @:<tr class='table-warning'>
                        break;

                    case 3:
                        @:<tr class='table-info'>
                        break;

                    case 4:
                        @:<tr class='table-secondary'>
                        break;

                    default:
                        @:<tr class='table-primary'>
                        break;
                }

                <td>
                    @item.DateCreated.ToString("dd/MM/yyyy HH:mm")         
                </td>
                <!-- Display status-->
                <td>
                    @if (item.CheckedOut == 1)
                    {
                        <i class="fa fa-syringe" style="color:red" data-toggle="tooltip" title="@item.CheckedOutTime.Value.ToString("dd/MM/yy HH:mm")"></i>
                    }
                    @if (item.CheckedIn == 1)
                    {
                        <i class="fa fa-registered" style="color:cornflowerblue" data-toggle="tooltip" title="@item.CheckedInTime.Value.ToString("dd/MM/yy HH:mm")"></i>
                    }
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Location)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.SampleID)
                </td>
                <td>
                    @Html.ActionLink(item.PatientID, "Details", "Patient", new { id = item.PatientID.PadLeft(20, '0') }, null)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.PatientName)
                </td>
            @:</tr>
            <tr class="table-light">
                <td colspan="6"style="font-size:x-small">@Html.DisplayFor(modelItem => item.Items)</td>
            </tr>
        }
    </tbody>
</table>
